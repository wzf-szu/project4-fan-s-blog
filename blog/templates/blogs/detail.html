{% extends 'blogs/base.html' %}
{% block content %}
<div class="card-base reveal" style="padding: 1.5rem; position: relative; overflow: visible;">
    <!-- Post Header -->
    <div class="post-header">
        <!-- Word Count & Time (Mocked for now as Django doesn't have reading time built-in easily without filters) -->
        <div class="post-meta-row" style="margin-bottom: 0.75rem; opacity: 0.6;">
            <div class="meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                <span>{{ post.word_count }} words</span>
            </div>
            <div class="meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                <span>{{ post.word_count|divisibleby:300|add:1 }} min read</span>
            </div>
        </div>

        <h1 class="post-title">{{ post.title }}</h1>

        <div class="post-meta-row">
            <div class="meta-item">
                <span>Published: {{ post.date_added|date:'Y-m-d' }}</span>
            </div>
            {% if post.tags.all %}
            <div class="meta-item" style="margin-left: auto;">
                {% for tag in post.tags.all %}
                    <a href="{% url 'blogs:index' %}?tag={{ tag.slug }}" class="tag-btn"># {{ tag.name }}</a>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>

    <hr class="post-divider">

    <!-- Cover Image -->
    {% if post.cover_url %}
        <img src="{{ post.cover_url }}" alt="{{ post.title }}" class="post-cover-image">
    {% endif %}

    <!-- Post Content -->
    <div class="custom-md">
        {{ post.text|linebreaks }}
    </div>

    <hr class="post-divider">

    <!-- Actions -->
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <a href="{% url 'blogs:index' %}" class="btn-regular" style="padding: 0.5rem 1rem; text-decoration: none;">
            ‚Üê Back to Home
        </a>
        
        {% if user == post.owner %}
        <div style="display: flex; gap: 0.5rem;">
            <a href="{% url 'blogs:edit_post' post.id %}" class="btn-regular" style="padding: 0.5rem 1rem; text-decoration: none;">
                Edit Post
            </a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
